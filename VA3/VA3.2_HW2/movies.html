<!DOCTYPE html>
<html>
  <head>
    <title>Movies Database</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>

  <body>
    <header class="bg-light">
      <div class="container">
        <nav class="navbar navbar-expand-lg">
         <a class="navbar-brand" href="index.html">Movies Database</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapseElement">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="collapseElement" class="navbar collapse navbar-collapse">
            <ul class="navbar-nav">
              <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
              <li class="nav-item"><a class="nav-link" href="#movies">Movies</a></li>
              <li class="nav-item"><a class="nav-link" href="report.html">Report</a></li>
            </ul>
          </div>
        </nav>
      </div>
    </header>

    <main id="movies" class="container">
      <section class="py-3">
        <h2>Add a New Movie</h2>
        <form>
          <label for="title">Title: </label><br>
          <input type="text" id="title" class="form-control"/><br>
          <label for="genre">Genre: </label><br>
          <input type="text" id="genre" class="form-control"/><br>
          <label for="releaseDate">Release Date: </label><br>
          <input type="date" id="releaseDate" class="form-control"/><br>
          <label for="director">Director: </label>
          <input type="text" id="director" class="form-control"/><br>
          <button type="button" id="addMovieBtn" class="btn btn-primary">Add Movie</button>
        </form>
      </section>
      <section class="py-3">
        <h2>List of Movies</h2>
        <div id="movieList" class="row"></div>
      </section>
    </main>

    <script>
      const movies = [
        {
          id: 1,
          title: "Movie 1",
          genre: "Thriller",
          releaseDate: "2021-12-02",
          director: "Danny Boyle"
        },
        {
          id: 2,
          title: "Movie 2",
          genre: "Science Fiction",
          releaseDate: "2022-05-22",
          director: "Christopher Nolan"
        }
      ]
      const movieList = document.querySelector("#movieList")
      const addMovieBtn = document.querySelector("#addMovieBtn")

      function updateMovieList(){
        movieList.innerHTML = ``
        for(let i = 0; i < movies.length; i++){
          const movieListItem = document.createElement("div")
          movieListItem.className = "col-md-6 py-2"
          movieListItem.innerHTML = `
            <div class="card">
              <div class="card-header">
                <h4>${movies[i].title}</h4>
              </div>
              <div class="card-body">
                <p><strong>Genre: </strong>${movies[i].genre}</p>
                <p><strong>Release Date: </strong>${movies[i].releaseDate}</p>
                <p><strong>Director: </strong>${movies[i].director}</p>
                <a class="btn btn-primary" href="movieDetails.html?id=${movies[i].id}">Details</a>
              </div>
            </div>
          `
          movieList.appendChild(movieListItem)
        }
      }  

      addMovieBtn.addEventListener("click", function(){
        console.log("here")
        const newMovieId = movies.length + 1
        const title = document.querySelector("#title").value
        const genre = document.querySelector("#genre").value
        const releaseDate = document.querySelector("#releaseDate").value
        const director = document.querySelector("#director").value
        console.log(title, genre, releaseDate, director)
        const newMovieItem = {
          id: newMovieId,
          title: title,
          genre: genre,
          releaseDate: releaseDate,
          director: director
        }
        movies.push(newMovieItem)
        updateMovieList()
      })

      updateMovieList()
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>